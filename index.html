<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
				
				// LETS BUILD SOME ELEMENTS
				function createElem(elem, label, inside){
					var elemBox = document.createElement(elem);
					elemBox.className = label;
					elemBox.innerHTML = inside;

					return elemBox;
				}

				// LIST THE FIRST 10 EMAILS AND BODIES
				var list = [];

				for(i=0; i<10; i++){

					list.push(window.geemails[i]);

					var dateBox = createElem('div', 'dateElem', list[i].date);
					main.appendChild(dateBox);

					var senderBox = createElem('div', 'fromElem', list[i].sender);
					dateBox.appendChild(senderBox);

					var subjBox = createElem('div', 'subjElem', list[i].subject);
					dateBox.appendChild(subjBox);

					var bodyBox = createElem('p', 'bodyElem', list[i].body);
					dateBox.appendChild(bodyBox);
					bodyBox.style.display = 'none';

					dateBox.addEventListener('click', showBody);
				}
					
					// CREATING NEW MESSAGES
					function getNewMessage(){

						// increase inbox number
					counter++;
					inboxCount.innerHTML = 'Inbox: ' + counter;

						// so I can pull a random element from the list of emails
					var randNum = Math.floor(Math.random()*list.length);

					// repeated code from the original first 10 emails
					list.push(window.geemails[randNum]);

					var dateBox = createElem('div', 'dateElem', list[randNum].date);
					main.appendChild(dateBox);

					var senderBox = createElem('div', 'fromElem', list[randNum].sender);
					dateBox.appendChild(senderBox);

					var subjBox = createElem('div', 'subjElem', list[randNum].subject);
					dateBox.appendChild(subjBox);

					var bodyBox = createElem('p', 'bodyElem', list[randNum].body);
					bodyBox.style.display = 'none';
					dateBox.appendChild(bodyBox);

					dateBox.addEventListener('click', showBody);
					}

				// SHOW AND HIDE THE BODY
				function showBody(){
					var show = this.querySelector('.bodyElem');
					if(show.style.display == 'block'){
						show.style.display = 'none';
					}else{
						show.style.display = 'block';
					}
				}

				// INBOX COUNTER
				var counts = createElem('div', 'counter', 'Inbox: ' + list.length);
				inboxCount.appendChild(counts);
				var counter = 10;

				// RECURRING MESSAGE GENERATOR
				setInterval(getNewMessage, 5000);

      };
    </script>
	</head>
	<body>

		<header class="title">
			<h1 id="mainHeader">GeeMail</h1>
			<div id="inboxCount"></div>
		</header>

		<div class="container" id="main">
			<!-- Build Me! -->
		</div>

	</body>
</html>